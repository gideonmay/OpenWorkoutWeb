<!DOCTYPE html>
<html lang="en-US">

<head>

<title>${product} - ${name}</title>

<link rel="stylesheet" href="${root_url}/css/normalize.css">
<link rel="stylesheet" href="${root_url}/css/site.css">

<meta charset="UTF-8">
<meta name="description" content="User profile">
<meta name="keywords" content="profile">

</head>

<link rel="shortcut icon" href="${root_url}/media/favicon.ico" >

<body>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css" integrity="sha256-wiYwAtNSF3nuWFREDO5vx5cwSmngwE1pGg59NQURCUY=" crossorigin="anonymous" />

<script type="text/javascript" src="${root_url}/js/all.js"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha256-KM512VNnjElC30ehFwehXjx1YCHPiQkOPmqnrWtpccM=" crossorigin="anonymous"></script>

<script>

    function update_birthday()
    {
		var the_url = "${root_url}/api/1.0/update_profile";
		var birthday = document.getElementById("birthday").value;
		var dict = [];
		var result_text = {};
		var timestamp = Date.parse(birthday) / 1000;

		dict.push({["birthday"] : timestamp});
		if (send_post_request(the_url, dict, result_text))
			alert("Birthday updated!");
		else
			alert("An error occurred!");
    }

	function update_height()
	{
		var the_url = "${root_url}/api/1.0/update_profile";
		var height = document.getElementById("height").value;
		var dict = [];
		var result_text = {};

		dict.push({["height"] : height});
		if (send_post_request(the_url, dict, result_text))
			alert("Height updated!");
		else
			alert("An error occurred!");
	}

	function update_weight()
	{
		var the_url = "${root_url}/api/1.0/update_profile";
		var weight = document.getElementById("weight").value;
		var dict = [];
		var result_text = {};

		dict.push({["weight"] : weight});
		if (send_post_request(the_url, dict, result_text))
			alert("Weight updated!");
		else
			alert("An error occurred!");
	}

	function update_gender()
	{
		var the_url = "${root_url}/api/1.0/update_profile";
		var gender = document.getElementById("gender").value;
		var dict = [];
		var result_text = {};

		dict.push({["gender"] : gender});
		if (send_post_request(the_url, dict, result_text))
			alert("Gender updated!");
		else
			alert("An error occurred!");
	}

	function update_resting_hr()
	{
		var the_url = "${root_url}/api/1.0/update_profile";
		var weight = document.getElementById("resting_hr").value;
		var dict = [];
		var result_text = {};

		dict.push({["resting heart rate"] : weight});
		if (send_post_request(the_url, dict, result_text))
			alert("Resting heart rate updated!");
		else
			alert("An error occurred!");
	}

	$(function()
	{
		$('#birthday').datepicker({
            yearRange: '1910:2010',
            changeYear: true,
            changeMonth: true
        });
		var n = new Date(${birthday} * 1000);
		document.getElementsByName('birthday')[0].placeholder=n.toLocaleDateString();
	});

</script>

<section class="nav">
${nav}
</section>

<div class="profile" style="width: 600px">
	<h2>Birthday</h2>
	<input type="text" name="birthday" id="birthday"><br>
	<button type="button" onclick="return update_birthday()">Update</button>
	<hr>
	<h2>Height</h2>
	<input type="text" id="height" value="${height}"> ${height_units}<br>
	<button type="button" onclick="return update_height()">Update</button>
	<hr>
	<h2>Weight</h2>
	<input type="text" id="weight" value="${weight}"> ${weight_units}<br>
	<button type="button" onclick="return update_weight()">Update</button>
	<hr>
	<h2>Gender</h2><br>
	<select id="gender" class="checkin" >
${gender_options}
	</select><br>
	<button type="button" onclick="return update_gender()">Update</button>
	<hr>
	<h2>Resting Heart Rate</h2>
	<input type="text" id="resting_hr" value="${resting_hr}"> bpm<br>
	<button type="button" onclick="return update_resting_hr()">Update</button>
	<hr>
	<h2>BMI</h2>
${bmi}
	<hr>
	<h2>VO2 Max</h2>
${vo2max}
	<hr>
	<h2>Estimated Functional Threshold Power (FTP)</h2>
${ftp}
	<hr>
	<h2>Heart Rate Zones</h2>
${hr_zones}
	<hr>
	<h2>Power Training Zones</h2>
${power_zones}
	<hr>
	<h2>Personal Records</h2>
${prs}
</div>

</body>
</html>
